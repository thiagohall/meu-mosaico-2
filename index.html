<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Mosaico de Lives - Modo Compatibilidade</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #0b0b0b; color: white; margin: 0; padding: 0; }
        .header { background: #1a1a1a; padding: 15px; display: flex; gap: 10px; position: sticky; top: 0; z-index: 999; border-bottom: 2px solid #333; }
        input { flex-grow: 1; padding: 12px; border-radius: 5px; border: 1px solid #444; background: #000; color: #fff; }
        button { padding: 10px 20px; background: #e60000; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        button:hover { background: #ff3333; }
        
        /* Grid Inteligente */
        #container { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); 
            gap: 15px; 
            padding: 15px; 
        }

        .video-box { 
            position: relative; 
            background: #000; 
            border-radius: 8px; 
            overflow: hidden; 
            aspect-ratio: 16 / 9; /* Mantém a proporção de TV */
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        iframe { width: 100%; height: 100%; border: none; }

        .btn-fechar { 
            position: absolute; top: 5px; right: 5px; 
            background: rgba(255,0,0,0.8); color: white; 
            border: none; border-radius: 50%; width: 30px; height: 30px; 
            cursor: pointer; z-index: 10; font-weight: bold;
        }
    </style>
</head>
<body>

<div class="header">
    <input type="text" id="urlInput" placeholder="Cole o link aqui (YouTube, Twitch ou Kick)...">
    <button onclick="adicionarLive()">ADICIONAR</button>
</div>

<div id="container"></div>

<script>
function adicionarLive() {
    const input = document.getElementById('urlInput');
    const container = document.getElementById('container');
    let url = input.value.trim();
    
    if(!url) return;

    let finalUrl = "";

    // Lógica para YOUTUBE (Usando youtube-nocookie para evitar bloqueios locais)
    if (url.includes("youtube.com") || url.includes("youtu.be")) {
        let id = "";
        if(url.includes("v=")) id = url.split("v=")[1].split("&")[0];
        else if(url.includes("live/")) id = url.split("live/")[1].split("?")[0];
        else id = url.split("/").pop();
        
        finalUrl = `https://www.youtube-nocookie.com/embed/${id}?autoplay=1&rel=0`;
    } 
    // Lógica para TWITCH
    else if (url.includes("twitch.tv")) {
        let canal = url.split("/").pop();
        finalUrl = `https://player.twitch.tv/?channel=${canal}&parent=localhost`;
    }
    // Lógica para KICK
    else if (url.includes("kick.com")) {
        let canal = url.split("/").pop();
        finalUrl = `https://player.kick.com/${canal}`;
    }

    if (finalUrl) {
        const item = document.createElement('div');
        item.className = 'video-box';
        item.innerHTML = `
            <button class="btn-fechar" onclick="this.parentElement.remove()">X</button>
            <iframe src="${finalUrl}" allowfullscreen allow="autoplay; encrypted-media"></iframe>
        `;
        container.appendChild(item);
        input.value = "";
    } else {
        alert("Link não reconhecido!");
    }
}
</script>

</body>
</html>